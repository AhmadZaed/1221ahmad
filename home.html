<!DOCTYPE html>
<html lang="en">
<head>
    <title>Beer 7 360</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow-y: auto;
            overflow-x: hidden;
            font-family: "Lato", sans-serif;
            background: linear-gradient(135deg, white, #ff4d4d);
            color: black;
        }

        #main-content {
            min-height: 100vh;
            padding: 20px;
        }

        .w3-bar-item:hover {
            background-color: #ff4d4d !important;
            color: white !important;
        }

        header {
            padding: 128px 16px;
            background-color: #ff4d4d;
            color: white;
            text-align: center;
        }

        .admin-panel {
            background-color: #ff4d4d;
            padding: 20px;
            border-radius: 10px;
            color: black;
            margin-top: 20px;
        }

        .user-management {
            margin-top: 20px;
            background: #fff;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
        }

        .user-management h4 {
            text-align: center;
            margin-bottom: 20px;
            color: #333;
        }

        .user-management table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        .user-management th, .user-management td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: center;
        }

        .user-management th {
            background-color: #f2f2f2;
            color: #333;
        }

        .btn-delete {
            background-color: #e63939;
            color: white;
            border: none;
            padding: 8px 12px;
            cursor: pointer;
            border-radius: 5px;
        }

        .btn-delete:hover {
            background-color: #c53030;
        }

        .btn-manage {
            background-color: #4CAF50;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            display: block;
            margin: 0 auto;
            margin-bottom: 20px;
        }

        .btn-manage:hover {
            background-color: #45a049;
        }

        .search-box {
            margin-bottom: 20px;
            text-align: center;
        }

        .search-box input {
            width: 50%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .admin-updates {
            margin-top: 20px;
            background: #fff;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
        }

        .admin-updates h4 {
            text-align: center;
            margin-bottom: 20px;
            color: #333;
        }

        .admin-updates ul {
            list-style: none;
            padding: 0;
        }

        .admin-updates li {
            padding: 10px 0;
            border-bottom: 1px solid #ddd;
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <div id="navbar" class="w3-top">
        <div class="w3-bar w3-red w3-card w3-left-align w3-large">
            <a href="home.html" class="w3-bar-item w3-button w3-padding-large w3-white">דף בית</a>
            <a href="דיווח על מפגעים.html" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">דיווח על מפגעים</a>
            <a href="מעקב_אחרי_פעיות.html" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">מעקב אחרי פעייות</a>
            <a href="הצגת_בעיות_על_מפה.html" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">הצגת בעיות על מפה</a>
            <a href="יצירת_קשר_עם_מחלקות_בערייה.html" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">יצירת קשר עם מחלקות בערייה</a>
            <a href="הצעת רעיונות לשיפור העיר.html" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">הצעת רעיונות לשיפור העיר</a>
            <a href="עדכון_פרויקטים_ויוזמות_עירוניות.html" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">עדכון פרויקטים ויוזמות עירוניות</a>
            
            <a href="#" class="w3-bar-item w3-button w3-right logoutbtn" onclick="dganjoLogout()">Logout</a>
        </div>
    </div>

    <!-- Main content -->
    <div id="main-content" class="w3-container" style="display:block;">
        <!-- Header Section -->
        <header class="w3-container w3-red w3-center" style="padding:128px 16px">
            <h1 class="w3-margin w3-jumbo" style="color:white;">Beer 7 360</h1>
            <p class="w3-xlarge" style="color:white;">Helping residents, workers, and admins manage issues efficiently.</p>
        </header>

        <!-- Admin Panel -->
         
        <div id="adminContent" class="admin-panel" style="display: none;">
            <h3>Admin Panel</h3>
            <p>As an admin, you can manage users, view statistics, and perform various administrative tasks.</p>
            <button class="btn-manage" onclick="scrollToUserManagement()">ניהול הרשאות משתמשים</button>
            <button class="btn-manage" onclick="navigateTo('הוספת_מודול.html')">הוספת מודול</button>
            <button class="btn-manage" onclick="navigateTo('עדכון_גרסאות.html')">עדכון גרסאות</button>
            <!-- Updates Section -->
            <div id="adminUpdates" class="admin-updates">
                <h4>עדכונים אחרונים - בעיות טכניות ומשימות תחזוקה</h4>
            
                <!-- Filters and Sorting -->
                <div class="filter-sort">
                    <label for="filterStatus">סנן לפי סטטוס:</label>
                    <select id="filterStatus" onchange="filterUpdates()" class="filter-dropdown">
                        <option value="all">הכל</option>
                        <option value="בטיפול">בטיפול</option>
                        <option value="בהמתנה">בהמתנה</option>
                        <option value="טופל">טופל</option>
                    </select>
            
                    <label for="sortDate">מיין לפי:</label>
                    <select id="sortDate" onchange="sortUpdates()" class="filter-dropdown">
                        <option value="latest">מהחדש לישן</option>
                        <option value="oldest">מהישן לחדש</option>
                    </select>
                </div>
            
                <!-- Task Cards -->
                <div id="updatesCards" class="cards-container">
                    <div class="card" data-status="בטיפול" data-date="2025-01-25">
                        <h5>כשל בהתחברות המשתמשים</h5>
                        <p>משתמשים מדווחים על שגיאה 500 בעת ניסיון התחברות.</p>
                        <p class="status-text"><strong>סטטוס:</strong> <span class="status status-in-progress">בטיפול</span></p>
                        <p class="date">25/01/2025</p>
                    </div>
            
                    <div class="card" data-status="בהמתנה" data-date="2025-01-25">
                        <h5>טופס הגשת דיווחים לא נטען</h5>
                        <p>בעיה בממשק ה-API לקבלת טפסים.</p>
                        <p class="status-text"><strong>סטטוס:</strong> <span class="status status-pending">בהמתנה</span></p>
                        <p class="date">25/01/2025</p>
                    </div>
            
                    <div class="card" data-status="טופל" data-date="2025-01-24">
                        <h5>זמן טעינה גבוה לדף המפה</h5>
                        <p>תשתית השרתים עמוסה או בעיה בקובץ JavaScript.</p>
                        <p class="status-text"><strong>סטטוס:</strong> <span class="status status-resolved">טופל</span></p>
                        <p class="date">24/01/2025</p>
                    </div>
                </div>
            </div>
            
            <style>
                .admin-updates {
                    margin-top: 20px;
                    background: #f8f9fa;
                    border-radius: 10px;
                    padding: 20px;
                    box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
                }
            
                .admin-updates h4 {
                    text-align: center;
                    margin-bottom: 20px;
                    color: #333;
                }
            
                .filter-sort {
                    display: flex;
                    justify-content: center;
                    gap: 20px;
                    margin-bottom: 20px;
                }
            
                .filter-dropdown {
                    padding: 10px;
                    border: 1px solid #ddd;
                    border-radius: 5px;
                    font-size: 16px;
                }
            
                .cards-container {
                    display: flex;
                    flex-wrap: wrap;
                    gap: 20px;
                    justify-content: center;
                }
            
                .card {
                    background: white;
                    border-radius: 10px;
                    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                    padding: 15px;
                    width: 300px;
                    text-align: left;
                    position: relative;
                }
            
                .card h5 {
                    margin-top: 0;
                    color: #333;
                    font-size: 18px;
                }
            
                .card p {
                    color: #666;
                    margin: 10px 0;
                }
            
                .status-text {
                    margin-top: 10px;
                    font-weight: bold;
                }
            
                .status {
                    padding: 5px 10px;
                    border-radius: 15px;
                    font-size: 12px;
                    font-weight: bold;
                }
            
                .status-in-progress {
                    background: #ffc107;
                    color: #fff;
                }
            
                .status-pending {
                    background: #ff5722;
                    color: #fff;
                }
            
                .status-resolved {
                    background: #4caf50;
                    color: #fff;
                }
            
                .date {
                    font-size: 12px;
                    color: #aaa;
                    text-align: right;
                }
            </style>
            
            <script>
                // סינון עדכונים לפי סטטוס
                function filterUpdates() {
                    const filterValue = document.getElementById('filterStatus').value;
                    const cards = document.querySelectorAll('.card');
            
                    cards.forEach(card => {
                        const status = card.getAttribute('data-status');
                        if (filterValue === 'all' || status === filterValue) {
                            card.style.display = 'block';
                        } else {
                            card.style.display = 'none';
                        }
                    });
                }
            
                // מיון עדכונים לפי תאריך
                function sortUpdates() {
                    const sortValue = document.getElementById('sortDate').value;
                    const cardsContainer = document.getElementById('updatesCards');
                    const cards = Array.from(cardsContainer.querySelectorAll('.card'));
            
                    cards.sort((a, b) => {
                        const dateA = new Date(a.getAttribute('data-date'));
                        const dateB = new Date(b.getAttribute('data-date'));
                        return sortValue === 'latest' ? dateB - dateA : dateA - dateB;
                    });
            
                    cards.forEach(card => cardsContainer.appendChild(card));
                }
            </script>
            

            <!-- User Management Section -->
            <div id="userManagement" class="user-management">
                <h4>ניהול הרשאות משתמשים</h4>

                <div class="search-box">
                    <input type="text" id="searchInput" onkeyup="searchUsers()" placeholder="חפש משתמש לפי שם או אימייל...">
                </div>

                <table>
                    <thead>
                        <tr>
                            <th>שם משתמש</th>
                            <th>אימייל</th>
                            <th>תפקיד</th>
                            <th>פעולות</th>
                        </tr>
                    </thead>
                    <tbody id="userTable">
                        <!-- Users will be dynamically added here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // הצגת תוכן המנהל רק אם המשתמש הוא אדמין
            if (localStorage.getItem("userType") === "admin") {
                document.getElementById("adminContent").style.display = "block";
                loadUsers();
            }
        });

        // Scroll to User Management Section
        function scrollToUserManagement() {
            document.getElementById('userManagement').scrollIntoView({ behavior: 'smooth' });
        }

        // Navigate to new modules
        function navigateTo(module) {
            window.location.href = module;
        }

        // שליפת משתמשים (מדומה)
        function loadUsers() {
            const users = [
                { username: "user1", email: "user1@example.com", role: "resident" },
                { username: "worker1", email: "worker1@example.com", role: "worker" },
                { username: "admin1", email: "admin1@example.com", role: "admin" },
                { username: "דניאל", email: "daniel@example.com", role: "resident" }
            ];

            const userTable = document.getElementById("userTable");
            users.forEach(user => {
                const row = document.createElement("tr");
                row.innerHTML = `
                    <td>${user.username}</td>
                    <td>${user.email}</td>
                    <td>
                        <select onchange="updateRole('${user.username}', this.value)">
                            <option value="resident" ${user.role === "resident" ? "selected" : ""}>תושב</option>
                            <option value="worker" ${user.role === "worker" ? "selected" : ""}>עובד</option>
                        </select>
                    </td>
                    <td>
                        <button class="btn-delete" onclick="deleteUser('${user.username}')">מחק</button>
                    </td>
                `;
                userTable.appendChild(row);
            });
        }

        // עדכון תפקיד משתמש
        function updateRole(username, newRole) {
            alert(`התפקיד של ${username} עודכן ל-${newRole}`);
        }

        // מחיקת משתמש
        function deleteUser(username) {
            if (confirm(`האם אתה בטוח שברצונך למחוק את ${username}?`)) {
                alert(`${username} נמחק`);
                const userTable = document.getElementById("userTable");
                const rows = userTable.getElementsByTagName("tr");
                for (let i = 0; i < rows.length; i++) {
                    if (rows[i].cells[0].textContent === username) {
                        userTable.deleteRow(i);
                        break;
                    }
                }
            }
        }

        // חיפוש משתמשים בטבלה
        function searchUsers() {
            const input = document.getElementById("searchInput").value.toLowerCase();
            const rows = document.querySelectorAll("#userTable tr");

            rows.forEach(row => {
                const username = row.cells[0].textContent.toLowerCase();
                const email = row.cells[1].textContent.toLowerCase();
                if (username.includes(input) || email.includes(input)) {
                    row.style.display = "";
                } else {
                    row.style.display = "none";
                }
            });
        }

        function dganjoLogout() {
    localStorage.clear();
    sessionStorage.clear();
    alert("התנתקת בהצלחה!");
    window.location.href = 'login.html'; // מעבר לדף הבית
}

</script>
</body>
</html>












   












   
  












   












   
